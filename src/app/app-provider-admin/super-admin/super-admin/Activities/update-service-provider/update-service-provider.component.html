<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
    <h4>Update Provider</h4>
  </div>
  <div class="col-xs-12 col-sm-12" *ngIf="searchPage">
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
        <!-- <mat-form-field class="hide_underline width100">
          <input matInput style="display:none"> -->
        <mat-select
          placeholder="Provider Name"
          class="width100"
          [(ngModel)]="providerSelected"
          (selectionChange)="selectedProvider(providerSelected)"
          required
        >
          <mat-option
            *ngFor="let provider of allProviders"
            [value]="provider.serviceProviderId"
          >
            {{ provider.serviceProviderName }}
          </mat-option>
        </mat-select>
        <!-- </mat-form-field> -->
      </div>
    </div>
    <div class="pull-right" *ngIf="data.length !== 0 && showProvider">
      <mat-form-field id="filterbox">
        <input
          matInput
          placeholder="In-Table Search"
          #filterTerm
          (keyup)="filterComponentList(filterTerm.value)"
        />
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
    </div>
    <div class="row">
      <div class="col-xs-12 col-sm-12" *ngIf="showProvider">
        <div class="table-responsive m-t-15">
          <!-- <table class="table table-striped table-hover" [md2Data]="filtereddata" #md2="md2DataTable" [rowsPerPage]="4">
            <thead>
              <tr>
                <th width=5%>S.No.</th>
                <th width=30%>Serviceline</th>
                <th width=40%>State</th>
                <th width=15%>Edit</th>
                <th width=25%>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngIf="md2.data.length == 0" class="record-not-found">
                <td colspan="5" align="center">No records found</td>
              </tr>
              <tr *ngFor="let providerInfo of md2.data; let i=index">
                <td>{{(md2.activePage-1)*4+i+1}}</td>
                <td>{{providerInfo.serviceName}}</td>
                <td>{{providerInfo.stateName?providerInfo.stateName:'All State'}}</td>
                <td>
                  <mat-icon mdTooltip="Edit" class="mat-icon material-icons" role="img" aria-hidden="true" style="cursor:pointer" *ngIf="showProvider"
                    (click)="edit(providerSelected)">edit</mat-icon>
                </td>
                <td>{{providerInfo.status}}</td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td colspan="2" class="p-l-0">
                  <md2-pagination></md2-pagination>
                </td>
                <td colspan="3" class="p-r-0">
                  <button color="primary" type="button" name="Save" md-raised-button class=" pull-right " (click)="addOrModify()">Create Service</button>
                </td>
              </tr>
            </tfoot>
          </table> -->
          <mat-table [dataSource]="filtereddata" class="mat-elevation-z8">
            <!-- S.No. Column -->
            <ng-container matColumnDef="sno">
              <mat-header-cell *matHeaderCellDef>S.No.</mat-header-cell>
              <mat-cell *matCellDef="let item; let i = index">{{
                i + 1
              }}</mat-cell>
            </ng-container>

            <!-- Category Name Column -->
            <ng-container matColumnDef="serviceName">
              <mat-header-cell *matHeaderCellDef>Serviceline</mat-header-cell>
              <mat-cell *matCellDef="let item">{{ item.serviceName }}</mat-cell>
            </ng-container>

            <!-- Category Description Column -->
            <ng-container matColumnDef="stateName">
              <mat-header-cell *matHeaderCellDef>State</mat-header-cell>
              <mat-cell *matCellDef="let element">{{
                element.stateName ? element.stateName : "All States"
              }}</mat-cell>
            </ng-container>

            <!-- Action Column -->
            <ng-container matColumnDef="edit">
              <th mat-header-cell *matHeaderCellDef>Edit</th>
              <td mat-cell *matCellDef="let item">
                <mat-icon
                  matTooltip="Edit"
                  class="mat-icon material-icons"
                  role="img"
                  aria-hidden="true"
                  style="cursor: pointer"
                  *ngIf="showProvider"
                  (click)="edit(providerSelected)"
                  >edit</mat-icon
                >
              </td>
            </ng-container>

            <ng-container matColumnDef="status">
              <mat-header-cell *matHeaderCellDef>Status</mat-header-cell>
              <mat-cell *matCellDef="let item">{{ item.status }}</mat-cell>
            </ng-container>

            <!-- Header and Row Definitions -->
            <mat-header-row
              *matHeaderRowDef="[
                'sno',
                'serviceName',
                'stateName',
                'edit',
                'status'
              ]"
            ></mat-header-row>
            <mat-row
              *matRowDef="
                let row;
                columns: ['sno', 'serviceName', 'stateName', 'edit', 'status']
              "
            ></mat-row>
          </mat-table>
          <div>
            <button
              color="primary"
              type="button"
              name="Save"
              md-raised-button
              class="pull-right"
              (click)="addOrModify()"
            >
              Create Service
            </button>
          </div>
          <!-- Pagination -->
          <mat-paginator
            [length]="filtereddata.data.length"
            [pageSize]="4"
            [pageSizeOptions]="[4, 10, 20]"
          ></mat-paginator>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="!searchPage">
    <form #modifyForm="ngForm" autocomplete="off">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 p-a-0">
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 m-t-15">
          <!-- <mat-form-field class="hide_underline width100">
            <input matInput style="display:none"> -->
          <mat-select
            placeholder="Serviceline"
            class="width100"
            name="serviceLine"
            [(ngModel)]="serviceline"
            required
            #sLine="ngModel"
            (selectionChange)="getAvailableStates(serviceline)"
          >
            <mat-option
              *ngFor="let service of servicelines"
              [value]="service.serviceID"
              (click)="setIsNationalFlag(service.isNational)"
            >
              {{ service.serviceName }}
            </mat-option>
          </mat-select>
          <!-- </mat-form-field> -->
          <span *ngIf="allServicesMapped" class="error_text"
            >All Services Mapped</span
          >
        </div>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 m-t-15">
          <!-- <mat-form-field class="hide_underline width100">
            <input matInput style="display:none"> -->
          <mat-select
            placeholder="State"
            multiple
            class="width100"
            [disabled]="isNational"
            name="state"
            [(ngModel)]="state"
          >
            <mat-option
              *ngFor="let state of filteredStates"
              [value]="state.stateID"
            >
              {{ state.stateName }}
            </mat-option>
          </mat-select>
          <!-- </mat-form-field> -->
        </div>
      </div>
      <div class="col-xs-12 col-sm-12 col-lg-12 col-md-12 m-t-20">
        <button
          color="primary"
          type="button"
          name="back"
          md-raised-button
          class="pull-left"
          (click)="back()"
        >
          Back
        </button>
        <button
          *ngIf="!allServicesMapped"
          color="accent"
          type="button"
          name="modify"
          [disabled]="!modifyForm.valid"
          md-raised-button
          class="pull-right"
          (click)="modifyProvider(modifyForm.value)"
        >
          Save
        </button>
      </div>
    </form>
  </div>
</div>
